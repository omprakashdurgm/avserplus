import { CandidateProfile, CandidateApplication, StageProgress } from "@/types/candidate";

const createStageProgress = (currentStage: string): StageProgress[] => {
  const allStages: { stage: string; label: string }[] = [
    { stage: "application_submitted", label: "Application Submitted" },
    { stage: "application_under_review", label: "Under Review" },
    { stage: "shortlisted", label: "Shortlisted" },
    { stage: "document_verification", label: "Document Verification" },
    { stage: "documents_verified", label: "Documents Verified" },
    { stage: "merit_list_published", label: "Merit List Published" },
    { stage: "exam_scheduled", label: "Exam Scheduled" },
    { stage: "exam_completed", label: "Exam Completed" },
    { stage: "interview_scheduled", label: "Interview Scheduled" },
    { stage: "interview_completed", label: "Interview Completed" },
    { stage: "final_result_pending", label: "Result Processing" },
    { stage: "selected", label: "Selected" },
    { stage: "offer_sent", label: "Offer Sent" },
    { stage: "offer_accepted", label: "Offer Accepted" },
    { stage: "joining_pending", label: "Joining Pending" },
    { stage: "joined", label: "Joined" },
  ];

  const currentIndex = allStages.findIndex((s) => s.stage === currentStage);
  
  return allStages.slice(0, Math.max(currentIndex + 3, 6)).map((s, index) => ({
    stage: s.stage as any,
    label: s.label,
    status: index < currentIndex ? "completed" : index === currentIndex ? "current" : "upcoming",
    date: index <= currentIndex ? new Date(Date.now() - (currentIndex - index) * 3 * 24 * 60 * 60 * 1000).toISOString() : undefined,
  }));
};

export const mockCandidateApplications: CandidateApplication[] = [
  {
    id: "app-001",
    applicationNo: "AV2024045001",
    vacancyId: "VAC-045",
    vacancyTitle: "Assistant Professor - Computer Science",
    department: "Department of Higher Education",
    appliedDate: "2026-01-05T11:30:00Z",
    currentStage: "interview_scheduled",
    stageProgress: createStageProgress("interview_scheduled"),
    status: "active",
    examDetails: {
      examDate: "2026-02-15",
      examTime: "10:00 AM",
      venue: "Examination Center, New Delhi",
      reportingTime: "09:00 AM",
      admitCardUrl: "/documents/admit-card.pdf",
      marksObtained: 72,
      totalMarks: 100,
      cutoff: 60,
      qualified: true,
      rank: 45,
    },
    interviewDetails: {
      interviewDate: "2026-02-28",
      interviewTime: "11:30 AM",
      venue: "Interview Hall, Ministry of Education",
      mode: "offline",
      panelInfo: "Selection Committee - Panel A",
      totalMarks: 100,
    },
    documents: [
      {
        id: "doc-1",
        name: "Admit Card - Written Exam",
        type: "admit_card",
        url: "/documents/admit-card.pdf",
        generatedDate: "2026-02-01",
      },
      {
        id: "doc-2",
        name: "Written Exam Result",
        type: "result",
        url: "/documents/exam-result.pdf",
        generatedDate: "2026-02-20",
      },
    ],
    notifications: [
      {
        id: "notif-1",
        title: "Interview Scheduled",
        message: "Your interview has been scheduled for 28th February 2026 at 11:30 AM.",
        type: "success",
        date: "2026-02-22T10:00:00Z",
        read: false,
        actionUrl: "/applications/app-001",
        actionLabel: "View Details",
      },
      {
        id: "notif-2",
        title: "Written Exam Result Declared",
        message: "Congratulations! You have qualified the written examination with 72/100 marks.",
        type: "success",
        date: "2026-02-20T14:00:00Z",
        read: true,
      },
    ],
  },
  {
    id: "app-002",
    applicationNo: "AV2024038015",
    vacancyId: "VAC-038",
    vacancyTitle: "Senior Research Officer - Physics",
    department: "Department of Science & Technology",
    appliedDate: "2025-12-10T09:15:00Z",
    currentStage: "selected",
    stageProgress: createStageProgress("selected"),
    status: "selected",
    examDetails: {
      examDate: "2026-01-10",
      examTime: "02:00 PM",
      venue: "Science Center, Mumbai",
      reportingTime: "01:00 PM",
      admitCardUrl: "/documents/admit-card-2.pdf",
      marksObtained: 85,
      totalMarks: 100,
      cutoff: 55,
      qualified: true,
      rank: 3,
    },
    interviewDetails: {
      interviewDate: "2026-01-25",
      interviewTime: "10:00 AM",
      venue: "DST Headquarters, New Delhi",
      mode: "hybrid",
      panelInfo: "Expert Committee",
      marksObtained: 88,
      totalMarks: 100,
      qualified: true,
    },
    offerDetails: {
      offerLetterUrl: "/documents/offer-letter.pdf",
      offerDate: "2026-02-01",
      acceptanceDeadline: "2026-02-08",
      joiningDate: "2026-03-01",
      position: "Senior Research Officer",
      payScale: "Level 11 (â‚¹67,700 - â‚¹2,08,700)",
      location: "New Delhi",
      responseStatus: "pending",
    },
    documents: [
      {
        id: "doc-3",
        name: "Final Selection List",
        type: "merit_list",
        url: "/documents/selection-list.pdf",
        generatedDate: "2026-01-30",
      },
      {
        id: "doc-4",
        name: "Offer Letter",
        type: "offer_letter",
        url: "/documents/offer-letter.pdf",
        generatedDate: "2026-02-01",
      },
    ],
    notifications: [
      {
        id: "notif-3",
        title: "ğŸ‰ Congratulations! You are Selected",
        message: "You have been selected for the position of Senior Research Officer. Please accept the offer within 7 days.",
        type: "urgent",
        date: "2026-02-01T09:00:00Z",
        read: false,
        actionUrl: "/applications/app-002",
        actionLabel: "View Offer",
      },
    ],
  },
  {
    id: "app-003",
    applicationNo: "AV2024052008",
    vacancyId: "VAC-052",
    vacancyTitle: "Administrative Officer Grade II",
    department: "Ministry of Home Affairs",
    appliedDate: "2026-01-15T16:45:00Z",
    currentStage: "application_under_review",
    stageProgress: createStageProgress("application_under_review"),
    status: "active",
    documents: [],
    notifications: [
      {
        id: "notif-4",
        title: "Application Received",
        message: "Your application has been received and is under review.",
        type: "info",
        date: "2026-01-15T16:50:00Z",
        read: true,
      },
    ],
  },
];

export const mockCandidateProfile: CandidateProfile = {
  id: "user-001",
  name: "Amit Kumar",
  email: "amit.kumar@email.com",
  mobile: "+91-98XXXXXXXX",
  photo: undefined,
  applications: mockCandidateApplications,
  totalApplications: 3,
  activeApplications: 2,
  unreadNotifications: 2,
};
